<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AhnLab 채용 관리자</title>
  <link rel="stylesheet" href="css/style.css"/>

  <!-- Firebase (compat) -->
  <script defer src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.5/firebase-storage-compat.js"></script>

  <!-- PDF libs -->
  <script defer src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- 반드시 init → admin.js 순서 -->
  <script defer src="js/firebase-init.js"></script>
  <script defer src="js/admin.js"></script>
</head>
<body class="bg">
  <div class="container card">
    <h1 class="title">AhnLab 채용 관리자</h1>

    <!-- 로그인 -->
    <form id="adminLogin" class="section">
      <div class="form-group">
        <label>이메일</label>
        <input type="email" id="adminEmail" autocomplete="username" required/>
      </div>
      <div class="form-group">
        <label>비밀번호</label>
        <input type="password" id="adminPw" autocomplete="current-password" required/>
      </div>
      <button class="btn primary" type="submit">로그인</button>
      <div id="loginError" class="error" style="display:none;"></div>
      <div class="muted" style="margin-top:8px;">
        이 기기는 관리자 전용 계정으로 로그인합니다. 응답 페이지는 다른 기기/브라우저에서 익명으로 제출 가능합니다.
      </div>
    </form>

    <!-- 대시보드 -->
    <div id="adminPanel" style="display:none;">
      <div class="section stats">
        <div>총 응답: <strong id="totalCount">0</strong></div>
        <div>신입: <strong id="newCount">0</strong></div>
        <div>경력: <strong id="expCount">0</strong></div>
        <div>오늘: <strong id="todayCount">0</strong></div>
        <button id="logoutBtn" class="btn outline" style="float:right;">로그아웃</button>
      </div>

      <div class="section">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <h2>응답 목록 (실시간)</h2>
          <div class="muted">
            PDF 업로드: <strong id="storageFlagLabel">OFF</strong>
          </div>
        </div>
        <div id="list"></div>
      </div>
    </div>
  </div>
</body>
</html>
